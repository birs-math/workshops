<h1 id="invite-members">Invite Members to <%= @event.code %>
  <small>Reply by date: <%= RsvpDeadline.new(@event.start_date).rsvp_by %>
    <span id="rsvp-by-icon"><a href="#" data-toggle="modal" data-target="#about-reply-by"><span class="glyphicon glyphicon-question-sign"></span></a></span>
  </small>
</h1>

<article>
<% if @memberships.empty? %>
  <div class="row">
      <div class="col-md-12">
        <h3>No eligible members.</h3>
        <p>Add some new members to the event by clicking <%= link_to 'Add Members', add_event_memberships_path(@event) %>.</p>
      </div>
    </div>
<% else %>
  <% @memberships.each do |status, members| %>
  <%= form_with model: @invite_members, url: invite_event_memberships_path(@event),
                       class: 'form', role: 'form' do |form| %>
  <div class="row<%= print_section?(status) %> <%= status.parameterize %>-members">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-heading table-heading">
          <%= status %> Members
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
          <div class="table-responsive">
            <table class="table table-striped table-hover members-list container-fluid">
              <thead>
              <tr class="no-print">
                <th class="select">Select</th>
                <th>#</th>
                <th>Name</th>
                <% if show_reinvite_buttons?(members.first) %>
                  <th class="hidden-xs hidden-sm">Invited On</th>
                <% else %>
                  <th class="hidden-xs hidden-sm"></th>
                <% end %>
                <th class="hidden-xs">Affiliation</th>
                <% if policy(@event).show_email_buttons?(status) %>
                    <th class="hidden-md hidden-lg" align="middle">Email</th>
                    <th class="hidden-xs hidden-sm">E-mail</th>
                <% end %>
                <th class="hidden-xs">Role</th>
              </tr>
              </thead>
              <tbody>
              <%= render partial: 'member_index_items', locals: {status: status, members: members, f: form } %>
              </tbody>
            </table>
          </div>
          <!-- /.table-responsive -->
          <div class="row rowlink-skip no-print invite-buttons">
            <div class="col-lg-6 pull-left">
              <%= button_tag 'Select All', type: 'button', id: "#{status.parameterize.downcase}-all", class: "btn btn-sm btn-default all-button" %>

              <%= button_tag 'Select None', type: 'button', id: "#{status.parameterize.downcase}-none", class: 'btn btn-sm btn-default none-button' %>

              <%= button_tag 'Invert Selection', type: 'button', id: "#{status.parameterize.downcase}-invert", class: 'btn btn-sm btn-default invert-button' %>
            </div>
            <div class="col-lg-6 pull-right">
              <%= form.submit invite_button(status), id: "#{status.parameterize.downcase}-submit",
                            class: 'btn btn-sm btn-default submit-button pull-right' %>

            </div>
          </div>
          <div class="row rowlink-skip no-print limits-message">
          <%= add_limits_message(status) %>
          </div>
        </div>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
  </div>
  <!-- /.row -->
  <% end %>
  <% end %>
<% end %>
</article>

<!-- ? Reply-by Date Modal -->
<div class="modal fade" id="about-reply-by" tabindex="-1" role="dialog" aria-labelledby="about-reply-by" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="about-roles-title">About the Reply-by Date</h3>
      </div>
      <div class="modal-body">
        <p>Inivations and reminders include a date that we ask participants to answer by. It is set automatically according to the following criteria:</p>
        <ul>
          <li>If the event is more than 3 months, 5 days from now, the deadline is 4 weeks from now.</li>
          <li>If the event is <strong>less</strong> than 3 months, 5 days from now, the deadline is 21 days from now.</li>
          <li>If the event is less than 2 months from now, the deadline is 10 days from now.</li>
          <li>If the event is less than 10 days from now, the deadline is the Tuesday before the event.</li>
        </ul>
        <p>If you wish to communicate a different date or any other information to the participants, you should e-mail them directly.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
