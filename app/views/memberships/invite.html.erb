<h1>Invite Members to <%= @event.code %></h1>

<article>
<% if @memberships.empty? %>
  <div class="row">
      <div class="col-md-12">
        <h3>No eligible members.</h3>
        <p>Add some new members to the event by clicking <%= link_to 'Add Members', add_event_memberships_path(@event) %>.</p>
      </div>
    </div>
<% else %>
  <%= form_with model: @invite_members, url: invite_event_memberships_path(@event),
                       class: 'form', role: 'form' do |form| %>
  <% @memberships.each do |status, members| %>
  <div class="row<%= print_section?(status) %> <%= status.parameterize %>-members">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-heading table-heading">
          <%= status %> Members
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
          <div class="table-responsive">
            <table class="table table-striped table-hover members-list container-fluid">
              <thead>
              <tr class="no-print">
                <th class="select">Select</th>
                <th>#</th>
                <th>Name</th>
                <% if show_reinvite_buttons?(members.first) %>
                  <th>Invited On</th>
                <% else %>
                  <th></th>
                <% end %>
                <th class="hidden-xs">Affiliation</th>
                <% if policy(@event).show_email_buttons?(status) %>
                    <th class="hidden-md hidden-lg" align="middle">Email</th>
                    <th class="hidden-xs hidden-sm">E-mail</th>
                <% end %>
                <th class="hidden-xs">Role</th>
              </tr>
              </thead>
              <tbody>
              <%= render partial: 'member_index_items', locals: {status: status, members: members, f: form } %>
              <tr><td class="rowlink-skip no-print invite-buttons" colspan="7">
                <div class="row">
                  <div class="col-md-1">
                  <%= button_tag 'Select All', type: 'button', id: "all-#{status.parameterize.downcase}", class: 'btn btn-sm btn-default' %>
                  </div>
                  <div class="col-md-1">
                  <%= button_tag 'Select None', type: 'button', id: "reset-#{status.parameterize.downcase}", class: 'btn btn-sm btn-default' %>
                  </div>
                  <div class="col-md-2">
                  <%= button_tag 'Invert Selection', type: 'button', id: "invert-#{status.parameterize.downcase}", class: 'btn btn-sm btn-default' %>
                  </div>
                  <div class="col-md-2">
                  <%= form.submit 'Invite Selected Members', id: 'invite-members-submit',
                        data: { confirm: 'This will send all selected members an email, (re)inviting them to attend
                          this workshop. Are you sure you want to proceed?'.squish },
                                class: 'btn btn-sm btn-default pull-left' %>
                  </div>
                </div>
              </td></tr>
              </tbody>
            </table>
          </div>
          <!-- /.table-responsive -->
        </div>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
  </div>
  <!-- /.row -->
  <% end %>
  <% end %>
<% end %>
</article>
